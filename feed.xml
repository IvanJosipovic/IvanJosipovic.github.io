<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
    <title>Ivans Blog</title>
    <link href="https://IvanJosipovic.github.io/feed.xml" rel="self" />
    <link href="https://IvanJosipovic.github.io" />
    <updated>2019-11-02T15:46:53-07:00</updated>
    <author>
        <name>Ivan Josipovic</name>
    </author>
    <id>https://IvanJosipovic.github.io</id>

    <entry>
        <title>Publish Blazor Component to Nuget with Github Actions</title>
        <author>
            <name>Ivan Josipovic</name>
        </author>
        <link href="https://IvanJosipovic.github.io/publish-blazor-component-to-nuget-with-github-actions.html"/>
        <id>https://IvanJosipovic.github.io/publish-blazor-component-to-nuget-with-github-actions.html</id>

        <updated>2019-11-02T15:46:42-07:00</updated>
            <summary>
                <![CDATA[
                    <p>So, you have a Blazor Component that you would like to publish to Nuget?</p>
<p>This guide will show you how to create a GitHub Action which triggers on a Git Tag and publishes the Blazor Component to Nuget.</p>

                ]]>
            </summary>
        <content type="html">
            <![CDATA[
                <p>So, you have a Blazor Component that you would like to publish to Nuget?</p>
<p>This guide will show you how to create a GitHub Action which triggers on a Git Tag and publishes the Blazor Component to Nuget.</p>

<p>Steps:</p>
<ol>
<li>GitHub Repository</li>
<li>Blazor Component Project</li>
<li>Nuget.org Account and API Key</li>
<li>Github Secret</li>
<li>Github Action</li>
<li>Create a Tag and Trigger a Release</li>
</ol>
<h2 id="mcetoc_1don1dqpr0">GitHub Repository</h2>
<p>In this example, we will use the following repostory, <a href="https://github.com/IvanJosipovic/Demo01">https://github.com/IvanJosipovic/Demo01</a></p>
<p>Clone the repo you created and remeber the location, in our case its "C:\Repos\IvanJosipovic\Demo01"</p>
<h2 id="mcetoc_1don1fqcd2">Blazor Component Project</h2>
<p>In Visual Studio, lets create a "Razor Class Library" Project.</p>
<p><img class="post__image" src="https://IvanJosipovic.github.io/media/posts/1/2019-11-02-14_17_31-Microsoft-Visual-Studio2.png" alt="" width="1238" height="710"></p>
<p>Enter a Project Name, set the location of your cloned repository, then click Create.<img class="post__image" src="https://IvanJosipovic.github.io/media/posts/1/2019-11-02-14_21_35-Microsoft-Visual-Studio.png" alt="" width="1024" height="710"></p>
<p>Click Create.<br><strong>Note:</strong> "Support pages and views" is needed if the project will use legacy .cshtml views.<img class="post__image" src="https://IvanJosipovic.github.io/media/posts/1/2019-11-02-14_22_54-.png" alt="" width="1024" height="710"></p>
<p>Edit the RazorClassLibrary.csproj and make sure it contains the following:<img class="post__image" src="https://IvanJosipovic.github.io/media/posts/1/2019-11-02-14_29_52-RazorClassLibrary-Microsoft-Visual-Studio-Preview.png" alt="" width="889" height="463"></p>
<p>Push the code to your GitHub repository.</p>
<h2 id="mcetoc_1don1j07h3">Nuget.org Account and API Key</h2>
<p>Go to <a href="https://www.nuget.org/">https://www.nuget.org/ </a>and create an account.</p>
<p>Once you're logged in, click on your username in the top right then click on "API Keys".</p>
<p> <img class="post__image" src="https://IvanJosipovic.github.io/media/posts/1/2019-11-02-14_51_08-NuGet-Gallery-_-API-Keys.png" alt="" width="696" height="538"></p>
<p>Enter a Key Name and Glob Pattern, then click Create. <br><img class="post__image" src="https://IvanJosipovic.github.io/media/posts/1/2019-11-02-14_54_01-NuGet-Gallery-_-API-Keys.png" alt="" width="1186" height="924"></p>
<p> Click Copy and save the key to safe place, well need it in the next step.<img class="post__image" src="https://IvanJosipovic.github.io/media/posts/1/2019-11-02-14_56_31-NuGet-Gallery-_-API-Keys.png" alt="" width="1180" height="355"></p>
<p> </p>
<h2 id="mcetoc_1don21v444">GitHub Secret</h2>
<p>In your GitHub repository, click on Settings, then click on Secrets.</p>
<p>Create a Secret named "NUGET_API_KEY" with your key.</p>
<p><img class="post__image" src="https://IvanJosipovic.github.io/media/posts/1/2019-11-02-15_00_00-Secrets.png" alt="" width="1294" height="906"></p>
<p> </p>
<h2 id="mcetoc_1don295s65">GitHub Action</h2>
<p>In your repository, click on "Actions", then click on "Set up a workflow yourself"</p>
<p>Enter the following yaml (<a href="https://github.com/IvanJosipovic/Demo01/blob/master/.github/workflows/release.yml">Source</a>)<br>Note: In your example, you will need to tweak a number of the parameters.<img class="post__image" src="https://IvanJosipovic.github.io/media/posts/1/2019-11-02-15_08_40-Demo01_release.yml-at-master-IvanJosipovic_Demo01.png" alt="" width="1177" height="891"></p>
<p> </p>
<h2 id="mcetoc_1don2ptkp6">Create a Tag and Trigger a Release</h2>
<p>In Visual Studio, perform a Git Fetch as we have pushed changes to our master branch.</p>
<p>In Visual Studio Team Explorer, click on Tags.</p>
<p><img class="post__image" src="https://IvanJosipovic.github.io/media/posts/1/2019-11-02-15_26_57-Demo01-Microsoft-Visual-Studio-Preview.png" alt="" width="588" height="591"></p>
<p>Enter a Tag named v0.0.2-alpha, then click Create Tag.</p>
<p><strong>Note: Tags names must be in "v*" format to Trigger the release<br>Note: </strong>The Nuget Version will be the Tag name without the "v", eg. 0.0.2-alpha</p>
<p><img class="post__image" src="https://IvanJosipovic.github.io/media/posts/1/2019-11-02-15_29_59-OneNote.png" alt="" width="568" height="461"></p>
<p>Select Tag v0.0.2-alpha, then right click on it and select Push.</p>
<p><img class="post__image" src="https://IvanJosipovic.github.io/media/posts/1/2019-11-02-15_30_11-Demo01-Microsoft-Visual-Studio-Preview.png" alt="" width="547" height="469"></p>
<p> </p>
<p>A GitHub Action called "Create Release" should be triggered.</p>
<p><img class="post__image" src="https://IvanJosipovic.github.io/media/posts/1/2019-11-02-15_37_57-Actions-IvanJosipovic_Demo01.png" alt="" width="1908" height="381"></p>
<p>If we go back to Nuget.org, we should see our new package Published.</p>
<p><img class="post__image" src="https://IvanJosipovic.github.io/media/posts/1/2019-11-02-15_45_07-NuGet-Gallery-_-RazorClassLibrary-0.0.2-alpha.png" alt="" width="1163" height="860"></p>
<p> </p>
<p>Enjoy!</p>
<p> </p>
            ]]>
        </content>
    </entry>
</feed>
